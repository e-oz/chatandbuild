@if (isLoading()) {
  <div class="animate-pulse">Loading...</div>
} @else {
  @if (lastError()) {
    <div class="text-red-700 bg-red-200 p-4 rounded text-center">Something went wrong...</div>
  } @else {
    @let messages = this.messages();
    @if (!messages.length) {
      <div class="text-blue-900 bg-blue-200 p-4 rounded text-center">No messages found</div>
    } @else {
      <div class="flex flex-col gap-4 w-full">
        @for (message of messages; track message._id) {
          <div class="flex flex-col lg:flex-row gap-6 w-full p-3 border border-neutral-300/50 rounded">
            <div class="flex flex-col gap-2 w-ful lg:shrink-0 lg:w-80">
              <div class="text-blue-950 font-extrabold">{{ message.author.name }}</div>
              <div class="text-sm font-light">{{ message.updatedAt | date:'medium' }}</div>
              <div class="text-xs font-bold w-fit">
                @switch (message.type) {
                  @case ('system') {
                    <div class="rounded-md py-1 px-2 border border-indigo-500 bg-indigo-200 text-indigo-900">System</div>
                  }
                  @case ('file') {
                    <div class="rounded-md py-1 px-2 border border-cyan-500 bg-cyan-200 text-cyan-900">File</div>
                  }
                  @default {
                    <div class="rounded-md py-1 px-2 border border-lime-500 bg-lime-200 text-lime-900">Text</div>
                  }
                }
              </div>
            </div>
            <div class="flex flex-col gap-2 grow">
              <div>{{ message.content }}</div>
            </div>
          </div>
        }
      </div>
    }
  }
}
