@if (!workspace()) {
  <div class="rounded p-2 border border-blue-500 bg-blue-200 text-blue-900 text-lg font-bold">Create Workspace</div>
  <form class="flex flex-col gap-4">
    <div class="flex flex-col lg:flex-row gap-4">
      <label class="font-bold lg:w-40">Name*</label>
      <input class="p-2 grow rounded border border-neutral-500" type="text" [formControl]="workspaceForm.controls.name">
    </div>
    <div class="flex flex-col lg:flex-row gap-4">
      <label class="font-bold lg:w-40">Description</label>
      <textarea class="field-sizing-content grow min-h-[3lh] p-2 rounded border border-neutral-500" [formControl]="workspaceForm.controls.description"></textarea>
    </div>
    <div class="flex flex-col lg:flex-row gap-4">
      <label class="font-bold lg:w-40">Type</label>
      <select class="p-2 grow rounded border border-neutral-500" [formControl]="workspaceForm.controls.type">
        <option [value]="'public'">Public</option>
        <option [value]="'private'">Private</option>
      </select>
    </div>
  </form>
  <button
    class="{{ isCreatingWorkspace() ? 'animate-pulse' : '' }} p-2 rounded border border-blue-700 bg-blue-500 text-white font-bold cursor-pointer hover:shadow-md shadow-blue-200"
    type="button"
    [disabled]="isCreatingWorkspace()"
    (click)="createWorkspace()">
    Create Workspace
  </button>
} @else {
  <div class="flex flex-col lg:flex-row gap-4 lg:items-center rounded p-2 border border-blue-500 bg-blue-200">
    <div class="grow text-blue-900 text-lg font-bold">Selected Workspace: {{ workspace()?.name ?? 'None' }}</div>
    <button
      class="py-2 px-3 rounded border border-blue-500 bg-blue-700 text-white font-bold cursor-pointer hover:shadow-md shadow-blue-20"
      type="button"
      [disabled]="isAddingMessage()"
      (click)="newWorkspaceForm()">
      Create New Workspace
    </button>
  </div>

  <div class="rounded p-2 border border-cyan-500 bg-cyan-200 text-cyan-900 font-bold">Add Message</div>
  <form class="flex flex-col gap-4">
    <div class="flex flex-col lg:flex-row gap-4">
      <label class="font-bold lg:w-40">Author Name*</label>
      <input class="p-2 grow rounded border border-neutral-500" type="text" [formControl]="messageForm.controls.authorName">
    </div>
    <div class="flex flex-col lg:flex-row gap-4">
      <label class="font-bold lg:w-40">Message*</label>
      <textarea class="field-sizing-content grow min-h-[3lh] p-2 rounded border border-neutral-500" [formControl]="messageForm.controls.content"></textarea>
    </div>
    <div class="flex flex-col lg:flex-row gap-4">
      <label class="font-bold lg:w-40">Type</label>
      <select class="p-2 grow rounded border border-neutral-500" [formControl]="messageForm.controls.type">
        <option [value]="'text'">Text</option>
        <option [value]="'file'">File</option>
        <option [value]="'system'">System</option>
      </select>
    </div>
  </form>
  <button
    class="{{ isAddingMessage() ? 'animate-pulse' : '' }} p-2 rounded border border-teal-900 bg-teal-700 text-white font-bold cursor-pointer hover:shadow-md shadow-blue-20"
    type="button"
    [disabled]="isAddingMessage()"
    (click)="sendMessage()">
    Add Message
  </button>
}

@let errors = this.errors();
@if (errors.length) {
  @for (error of errors; track error) {
    <div class="text-red-700 bg-red-200 border border-red-400 py-2 px-3 rounded">{{ error }}</div>
  }
}

@if (successMessage(); as msg) {
  <div class="text-green-700 bg-green-200 border border-green-400 text-center py-2 px-3 rounded">{{ msg.message }}</div>
}
